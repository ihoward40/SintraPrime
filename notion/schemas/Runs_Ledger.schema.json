{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "sintraprime://schemas/runs_ledger.schema.json",
  "title": "Runs Ledger",
  "description": "Credit monitoring ledger for automation runs",
  "type": "object",
  "required": [
    "Run_ID",
    "Timestamp",
    "Scenario_Name",
    "Job_Type",
    "Status",
    "Credits_Total",
    "Severity"
  ],
  "properties": {
    "Run_ID": {
      "type": "string",
      "maxLength": 128,
      "description": "Unique identifier for this run"
    },
    "Timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of run execution"
    },
    "Scenario_Name": {
      "type": "string",
      "maxLength": 240,
      "description": "Human-readable scenario name"
    },
    "Scenario_ID": {
      "type": "string",
      "maxLength": 120,
      "description": "Machine-readable scenario identifier"
    },
    "Job_Type": {
      "enum": ["BINDER_EXPORT", "RECONCILE_BACKFILL", "ANALYSIS", "OTHER"],
      "description": "Type of automation job"
    },
    "Status": {
      "enum": ["Success", "Failed", "Quarantined", "Escalated"],
      "description": "Run completion status"
    },
    "Credits_Total": {
      "type": "number",
      "minimum": 0,
      "description": "Total credits consumed by this run"
    },
    "Credits_In": {
      "type": "number",
      "minimum": 0,
      "description": "Input credits (context/prompt)"
    },
    "Credits_Out": {
      "type": "number",
      "minimum": 0,
      "description": "Output credits (completion)"
    },
    "Model": {
      "type": "string",
      "maxLength": 60,
      "description": "LLM model identifier"
    },
    "Input_Tokens": {
      "type": "integer",
      "minimum": 0,
      "description": "Number of input tokens"
    },
    "Output_Tokens": {
      "type": "integer",
      "minimum": 0,
      "description": "Number of output tokens"
    },
    "Artifacts_Link": {
      "type": "string",
      "format": "uri",
      "description": "URL to run artifacts (Drive, S3, etc.)"
    },
    "Severity": {
      "enum": ["SEV0", "SEV1", "SEV2", "SEV3", "SEV4"],
      "description": "Incident severity classification"
    },
    "Risk_Flags": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Risk indicators identified during classification"
    },
    "Risk_Summary": {
      "type": "string",
      "maxLength": 4000,
      "description": "Human-readable risk assessment summary"
    },
    "Misconfig_Likelihood": {
      "enum": ["High", "Medium", "Low"],
      "description": "Likelihood that this is a misconfiguration vs. legitimate load"
    },
    "Baseline_Expected_Credits": {
      "type": "number",
      "minimum": 0,
      "description": "Expected baseline credit consumption for this scenario"
    },
    "Variance_Multiplier": {
      "type": "number",
      "minimum": 0,
      "description": "Actual credits divided by baseline (variance factor)"
    }
  }
}