{
  "template_name": "Gmail-Alert-to-Slack (Notify Only)",
  "template_type": "make.com-scenario-definition",
  "idempotency_primitive": "gmail-label-gate",
  "notes": [
    "This is a deterministic scenario definition (not an exported Make blueprint).",
    "To create an importable blueprint JSON, export your scenario from Make.com and store it here.",
    "This file exists to lock the click-path, module order, and mappings in a machine-readable artifact."
  ],
  "gmail_labels": {
    "eligible": "ALERT_SLACK",
    "posted": "ALERT_SLACK_POSTED"
  },
  "modules": [
    {
      "name": "Gmail: Watch Emails (v2)",
      "module": "google-email:TriggerNewEmail",
      "settings": {
        "filter_type": "gmail_search",
        "query": "label:ALERT_SLACK -label:ALERT_SLACK_POSTED",
        "folder": "[Gmail]/All Mail",
        "markSeen": true,
        "maxResults": 1
      },
      "outputs_used": [
        "id",
        "subject",
        "date",
        "threadId",
        "messageId",
        "messageLink",
        "from.name",
        "from.address",
        "headers.messageId"
      ]
    },
    {
      "name": "Router (optional)",
      "type": "router",
      "routes": [
        {
          "name": "Slack notify route",
          "filter": "exists({{1.id}}) AND exists({{1.subject}}) AND length({{1.subject}}) > 0 AND exists({{1.from.address}}) AND length({{1.from.address}}) > 0"
        }
      ]
    },
    {
      "name": "Slack: Send a Message",
      "module": "slack:SendMessage",
      "settings": {
        "text": "ðŸ“§ New Email Alert\n\nFrom: {{1.from.name}} <{{1.from.address}}>\nSubject: {{1.subject}}\nDate: {{1.date}}\n\nThread ID: {{1.threadId}}\nGmail UID: {{1.id}}\n\nðŸ”— Open:\n{{1.messageLink}}\n"
      },
      "guardrails": [
        "no_slash_commands",
        "no_admin_actions"
      ]
    },
    {
      "name": "Gmail: Modify Email",
      "module": "google-email:ModifyEmail",
      "settings": {
        "email_uid": "{{1.id}}",
        "add_labels": ["ALERT_SLACK_POSTED"],
        "remove_labels": ["ALERT_SLACK"]
      }
    }
  ]
}
