# `notion-packet-record-db.md`

**Packet Record Database — Properties Only**

**Purpose:**
Create a permanent, auditable record **for each generated packet**, without re-deriving or mutating upstream facts.

This database records **that a packet was built**, *what it contained*, *from which sources*, and *when*—nothing more.

---

## 1) Scope & Constraints

* **Write-only from Make.com**
* **Read-only for humans and downstream tooling**
* **No formulas**
* **No recomputation of damages, patterns, or violations**
* **No duplication of Incident, Pattern, or Claim logic**

This DB is **not** a summary engine.
It is a **ledger of packet artifacts**.

---

## 2) Primary Key

| Property  | Type | Notes                                               |
| --------- | ---- | --------------------------------------------------- |
| Packet ID | Text | Unique, generated by Make (UUID or timestamp-based) |

---

## 3) Packet Identity

| Property         | Type   | Source                                   |
| ---------------- | ------ | ---------------------------------------- |
| Packet Type      | Select | Regulatory / Demand / Litigation Support |
| Counterparty     | Select | e.g., Verizon                            |
| Case Number      | Text   | From `meta.case_number` (JSON)           |
| Escalation Stage | Select | From Escalation DB                       |
| Packet Date      | Date   | Build timestamp (Make)                   |

---

## 4) Source Coverage (Explicit, Non-Derived)

| Property                  | Type   | Notes                                  |
| ------------------------- | ------ | -------------------------------------- |
| Incident Count Included   | Number | Count of incidents pulled              |
| Incident Date Range Start | Date   | Earliest `meta.email_date`             |
| Incident Date Range End   | Date   | Latest `meta.email_date`               |
| Pattern Records Included  | Number | Count of Pattern DB records referenced |
| Claim Summary Month       | Date   | Month snapshot used                    |

> These values are **copied**, not calculated here.

---

## 5) Financial Snapshot (Non-Authoritative)

| Property                       | Type     | Notes                        |
| ------------------------------ | -------- | ---------------------------- |
| Packet Total Estimated Damages | Number   | Copied from Claim Summary DB |
| Running Claim Total at Build   | Number   | Copied from Claim Summary DB |
| Claim Threshold Hit            | Checkbox | Copied value                 |

This DB **does not decide** claim totals.
It records what was true **at build time**.

---

## 6) Artifact References

| Property                     | Type | Notes                      |
| ---------------------------- | ---- | -------------------------- |
| Packet ZIP URL               | URL  | Drive or storage link      |
| Evidence Folder URL          | URL  | Folder containing exhibits |
| Verification Appendix URL    | URL  | If included                |
| Chain of Custody Diagram URL | URL  | If included                |

---

## 7) Integrity & Rebuild Safety

| Property               | Type     | Notes                             |
| ---------------------- | -------- | --------------------------------- |
| Source Schema Version  | Text     | e.g., `v1.0.1`                    |
| Packet Builder Version | Text     | From runbook version              |
| Deterministic Build    | Checkbox | Always true (asserted)            |
| Rebuild Safe           | Checkbox | Asserted true if inputs unchanged |

These are **assertions**, not computed checks.

---

## 8) Operational Metadata

| Property            | Type     | Notes                 |
| ------------------- | -------- | --------------------- |
| Built By Automation | Checkbox | True                  |
| Make Scenario Name  | Text     | For traceability      |
| Notes               | Text     | Human annotation only |

---

## 9) Write Contract (Make.com)

The Packet Record is written **once per packet build**, after:

1. Packet ZIP creation
2. Evidence & verification appendices included
3. Storage upload completed

If a packet is rebuilt, it creates a **new Packet Record**, not an overwrite.

---

## 10) Read Contract (Downstream)

This DB may be read by:

* Enforcement tracking
* Filing checklists
* Audit review
* Appeal preparation

It must **never** be used as an input to:

* Classification
* Pattern detection
* Damage computation

---

## 11) Relationship to Runbook

This DB corresponds to **Section 8 (Outputs)** of:

```
docs/complaint-packet-builder.md
```

Each Packet Record represents **exactly one execution** of that runbook.

---

### End of Schema

---

### Why this works

* Incidents = facts
* Patterns = behavior
* Claims = totals
* **Packets = artifacts**

This DB records artifacts, not arguments.

If you want the next tightening step, the natural move is:

* a **Packet Build Checklist** (pre/post conditions, human-readable), or
* a **Rebuild Comparison note** (what changed vs. last packet).

You’re now operating at an audit-grade level.
