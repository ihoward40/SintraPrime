# Required for calling agents (webhook transport)
WEBHOOK_SECRET=

# Optional default webhook URL for sendMessage
WEBHOOK_URL=

# Recommended: separate agent endpoints
VALIDATION_WEBHOOK_URL=
PLANNER_WEBHOOK_URL=

# Optional: persistence webhook
NOTION_RUNS_WEBHOOK=

# Optional: when set to 1, always append local receipts even if NOTION_RUNS_WEBHOOK is set
PERSIST_LOCAL_RECEIPTS=0

# Optional: tag receipts / audit records
PLAN_VERSION=ExecutionPlan@1

### Email ingest webhook (Make -> SintraPrime)
# If EMAIL_INGEST_SECRET is set, requests must include X-Email-Ingest-Secret (or X-Webhook-Secret).
EMAIL_INGEST_SECRET=

### Gmail OAuth (read-only)
# Path to the downloaded Google OAuth Desktop App JSON.
# Default: sintraprime/config/oauth/gmail_credentials.json (preferred)
# Fallback: runs/oauth/gmail/client_secret.json
GMAIL_OAUTH_CLIENT_FILE=

# Where SintraPrime stores the OAuth token (local secret).
# Default: runs/oauth/gmail/token.json
GMAIL_OAUTH_TOKEN_FILE=

# Where SintraPrime stores incremental pull state.
# Default: runs/oauth/gmail/pull-state.json
GMAIL_PULL_STATE_FILE=

# Vendor label to attach to ingested Gmail messages (aligns with /email_ingest schema).
GMAIL_VENDOR=verizon

# Optional Gmail search query (Gmail search syntax).
# Example: from:verizon-notification@verizon.com newer_than:30d
GMAIL_PULL_QUERY=

# Optional max messages per pull.
GMAIL_PULL_MAX=25

# Optional override for where to POST /email_ingest.
# Defaults to EMAIL_INGEST_BASE or OPS_BASE or http://127.0.0.1:8788
GMAIL_EMAIL_INGEST_BASE=

# Server port for the email ingest server
EMAIL_INGEST_PORT=8788

# Max request body size (bytes). Gmail HTML bodies can be large.
EMAIL_INGEST_MAX_BYTES=2000000

### Call ingest webhook (Make -> SintraPrime)
# If set, /call_ingest requests must include X-Webhook-Secret (or X-Call-Ingest-Secret).
CALL_INGEST_SECRET=

### Audio/transcript ingest webhook (Make -> SintraPrime)
# If set, /audio_ingest requests must include X-Webhook-Secret (or X-Audio-Ingest-Secret).
AUDIO_INGEST_SECRET=

### Regulatory narrative generator
# If set, /regulatory_narrative requests must include X-Webhook-Secret (or X-Regulatory-Narrative-Secret).
REGULATORY_NARRATIVE_SECRET=

### Exhibit binder generator
# If set, /exhibit_binder requests must include X-Webhook-Secret (or X-Exhibit-Binder-Secret).
EXHIBIT_BINDER_SECRET=

### Ops server auth (covers /web_snapshot, /web_watch, /operator/health)
# If set, requests must include X-Operator-Secret.
OPS_SERVER_SECRET=

# Optional alias secret if you want a dedicated env var for watch/snapshot webhooks.
# Header remains X-Webhook-Secret (recommended) or X-Operator-Secret.
WEB_WATCH_SECRET=

### Web snapshot (evidence-grade scraping)
# Optional: webhook secret for /web_snapshot auth (X-Webhook-Secret recommended).
WEB_SNAPSHOT_SECRET=

# Custom UA string used for robots.txt checks and Playwright browsing.
WEB_SNAPSHOT_USER_AGENT=

# When set to 1, authenticated requests may bypass robots.txt (use only for user-owned/authenticated pages).
WEB_SNAPSHOT_ALLOW_ROBOTS_BYPASS=0

# Optional persistent Chromium user profile dir. If set, authenticated web snapshots will use it.
# This enables capturing authenticated portals after a one-time manual login.
WEB_SNAPSHOT_USER_DATA_DIR=

# Optional artifact size guard (bytes). If set (>0), rejects oversized HTML/PDF/screenshot.
WEB_SNAPSHOT_MAX_BYTES=

# Executor tuning
DEFAULT_STEP_TIMEOUT_MS=30000

### Tier-8 Autonomy
# OFF | READ_ONLY_AUTONOMY | PROPOSE_ONLY_AUTONOMY | APPROVAL_GATED_AUTONOMY
AUTONOMY_MODE=OFF

### Tier-8 Budgets (policy-enforced)
POLICY_MAX_STEPS=10
POLICY_MAX_RUNTIME_MS=30000
POLICY_MAX_RUNS_PER_DAY=50

### Autonomy runner state dir
AUTONOMY_STATE_DIR=runs/autonomy/state

### Tier-10.1 Live Notion Read (Read-only)
NOTION_API_BASE=https://api.notion.com
NOTION_API_VERSION=2022-06-28
NOTION_TOKEN=

# Keys to redact before artifacts (case-insensitive)
NOTION_REDACT_KEYS=title,name,email,phone,address,ssn,tin

### Tier-10.2 Live Notion Write (Approval-gated)
# When set, /approve will re-fetch live prestate and require it matches the stored prestate fingerprint.
NOTION_LIVE_APPROVE_RECHECK=1

# Tier-22.2 — Probation success thresholds
PROBATION_SUCCESS_REQUIRED=3
PROBATION_WINDOW_HOURS=24

# Tier-∞.1 — Requalification Governor
REQUALIFY_TOKENS_PER_HOUR=2
REQUALIFY_MAX_CONCURRENT=1

# Tier-∞.1.1 — Activation governor
ACTIVATE_TOKENS_PER_HOUR=1
ACTIVATE_MAX_CONCURRENT=1

# Tier-23 — Confidence decay
CONFIDENCE_DECAY_HOURS=72
CONFIDENCE_MIN_SUCCESS=1

### Prime speak endpoint guard (POST /api/prime/speak)
# Dev-friendly default: if none of these are set, the guard is OFF.
# Shipped default policy (recommended):
# PRIME_SPEAK_GUARD=header_or_ip
# - Works reliably behind reverse proxies / NAT.
# - Allows either the secret header OR an allowlisted IP.
# High-assurance escalation (courtroom / air-gapped / fixed IP ranges):
# PRIME_SPEAK_GUARD=header_and_ip
# - Requires BOTH the secret header AND an allowlisted IP.
#
# Enable header guard (recommended):
# PRIME_SPEAK_GUARD=header
# PRIME_SPEAK_GUARD_SECRET=some-long-random-string
# PRIME_SPEAK_GUARD_HEADER=X-Prime-Speak-Secret
#
# Enable IP allowlist:
# PRIME_SPEAK_GUARD=ip
# PRIME_SPEAK_IP_ALLOWLIST=127.0.0.1,::1,192.168.0.0/16
#
# Combine:
# PRIME_SPEAK_GUARD=header_or_ip  (either passes)
# PRIME_SPEAK_GUARD=header_and_ip (both must pass)
PRIME_SPEAK_GUARD=
PRIME_SPEAK_GUARD_SECRET=
PRIME_SPEAK_GUARD_HEADER=X-Prime-Speak-Secret
PRIME_SPEAK_IP_ALLOWLIST=

### Prime speech tier gate
# Default: local (cloud speech disabled even if ELEVENLABS_* is configured)
# Set to enable ElevenLabs sink selection (still subject to SPEECH_TIERS and speak-guard):
# PRIME_SPEECH_TIER=elevenlabs
PRIME_SPEECH_TIER=local
