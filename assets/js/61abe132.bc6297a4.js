"use strict";(globalThis.webpackChunksintraprime_docs=globalThis.webpackChunksintraprime_docs||[]).push([[3588],{6435(e,i,n){n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"evidence-systems/email-ingest","title":"Email Ingest","description":"The Gmail \u2192 Make \u2192 SintraPrime email evidence pipeline with chain of custody.","source":"@site/docs/evidence-systems/email-ingest.md","sourceDirName":"evidence-systems","slug":"/evidence-systems/email-ingest","permalink":"/SintraPrime/docs/evidence-systems/email-ingest","draft":false,"unlisted":false,"editUrl":"https://github.com/ihoward40/SintraPrime/tree/gh-pages-source/docs/evidence-systems/email-ingest.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Email Ingest","description":"The Gmail \u2192 Make \u2192 SintraPrime email evidence pipeline with chain of custody."},"sidebar":"docsSidebar","previous":{"title":"Evidence Lifecycle","permalink":"/SintraPrime/docs/evidence-systems/lifecycle"},"next":{"title":"Web Snapshots","permalink":"/SintraPrime/docs/evidence-systems/web-snapshots"}}');var s=n(4848),a=n(8453);const r={sidebar_position:2,title:"Email Ingest",description:"The Gmail \u2192 Make \u2192 SintraPrime email evidence pipeline with chain of custody."},l="Email Ingest",c={},d=[{value:"Pipeline Architecture",id:"pipeline-architecture",level:2},{value:"Pipeline Stages",id:"pipeline-stages",level:2},{value:"1. Gmail Trigger",id:"1-gmail-trigger",level:3},{value:"2. Make.com Processing",id:"2-makecom-processing",level:3},{value:"3. Airlock Verification",id:"3-airlock-verification",level:3},{value:"4. Evidence Processing",id:"4-evidence-processing",level:3},{value:"5. Storage",id:"5-storage",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Usage",id:"usage",level:2},{value:"Next Steps",id:"next-steps",level:2}];function o(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"email-ingest",children:"Email Ingest"})}),"\n",(0,s.jsx)(i.p,{children:"The Email Ingest Server processes incoming emails through a governed pipeline that transforms email correspondence into verified evidence with complete chain of custody documentation."}),"\n",(0,s.jsx)(i.h2,{id:"pipeline-architecture",children:"Pipeline Architecture"}),"\n",(0,s.jsx)(i.mermaid,{value:'graph LR\n    A["Gmail"] --\x3e B["Make.com"]\n    B --\x3e C["Airlock Server"]\n    C --\x3e D["Brain Service"]\n    D --\x3e E["Evidence Processor"]\n    E --\x3e F["Receipt + Storage"]'}),"\n",(0,s.jsx)(i.h2,{id:"pipeline-stages",children:"Pipeline Stages"}),"\n",(0,s.jsx)(i.h3,{id:"1-gmail-trigger",children:"1. Gmail Trigger"}),"\n",(0,s.jsx)(i.p,{children:"Gmail filters route matching emails to a Make.com scenario:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Configurable label-based filtering"}),"\n",(0,s.jsx)(i.li,{children:"Sender/recipient matching"}),"\n",(0,s.jsx)(i.li,{children:"Subject line pattern matching"}),"\n",(0,s.jsx)(i.li,{children:"Attachment type filtering"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"2-makecom-processing",children:"2. Make.com Processing"}),"\n",(0,s.jsx)(i.p,{children:"Make.com extracts structured data from the email:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'{\n  "from": "sender@example.com",\n  "to": "recipient@example.com",\n  "subject": "Re: Trust Account Statement",\n  "date": "2026-02-20T10:30:00Z",\n  "body_text": "...",\n  "body_html": "...",\n  "attachments": [\n    {"name": "statement.pdf", "size": 245000, "mime": "application/pdf"}\n  ],\n  "headers": {"message-id": "<abc123@mail.example.com>"}\n}\n'})}),"\n",(0,s.jsx)(i.h3,{id:"3-airlock-verification",children:"3. Airlock Verification"}),"\n",(0,s.jsx)(i.p,{children:"The Airlock Server verifies the incoming payload:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"HMAC signature verification"}),"\n",(0,s.jsx)(i.li,{children:"Schema validation"}),"\n",(0,s.jsx)(i.li,{children:"Rate limit checking"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"4-evidence-processing",children:"4. Evidence Processing"}),"\n",(0,s.jsx)(i.p,{children:"The Brain Service processes the email as evidence:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Content hashing"})," \u2014 SHA-256 hash of email body and each attachment"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Metadata extraction"})," \u2014 Structured metadata from headers"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Evidence tagging"})," \u2014 Automated classification and tagging"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Receipt generation"})," \u2014 Immutable receipt for the ingest operation"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"5-storage",children:"5. Storage"}),"\n",(0,s.jsx)(i.p,{children:"Processed evidence is stored with full chain of custody:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Email content and metadata in the database"}),"\n",(0,s.jsx)(i.li,{children:"Attachments stored with content hashes"}),"\n",(0,s.jsx)(i.li,{children:"Receipt linked to the evidence record"}),"\n",(0,s.jsx)(i.li,{children:"Chain of custody initialized"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",metastring:'title=".env"',children:"GMAIL_INGEST_ENABLED=true\nGMAIL_INGEST_LABELS=evidence,legal,trust\nMAKE_WEBHOOK_URL=https://hook.make.com/your-webhook-id\nEVIDENCE_STORAGE_PATH=./evidence/email\n"})}),"\n",(0,s.jsx)(i.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"# Check ingest pipeline status\nnpx sintraprime evidence email status\n\n# Manually trigger email ingest\nnpx sintraprime evidence email ingest --label evidence --since 7d\n\n# View ingested emails\nnpx sintraprime evidence email list --limit 20\n"})}),"\n",(0,s.jsx)(i.admonition,{title:"Make.com Integration",type:"tip",children:(0,s.jsxs)(i.p,{children:["The email ingest pipeline uses Make.com as a middleware layer for reliable email processing. See the ",(0,s.jsx)(i.a,{href:"../deployment/overview",children:"Deployment Guide"})," for setup instructions."]})}),"\n",(0,s.jsx)(i.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"./web-snapshots",children:"Web Snapshots"})," \u2014 Web evidence capture"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"./lifecycle",children:"Evidence Lifecycle"})," \u2014 Complete evidence flow"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"../adapters/gmail",children:"Gmail Adapter"})," \u2014 Gmail adapter configuration"]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453(e,i,n){n.d(i,{R:()=>r,x:()=>l});var t=n(6540);const s={},a=t.createContext(s);function r(e){const i=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(a.Provider,{value:i},e.children)}}}]);