"use strict";(globalThis.webpackChunksintraprime_docs=globalThis.webpackChunksintraprime_docs||[]).push([[2448],{8415(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>s,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"api-reference/overview","title":"API Reference","description":"Complete API reference for SintraPrime\'s Airlock Server and Brain Service endpoints.","source":"@site/docs/api-reference/overview.md","sourceDirName":"api-reference","slug":"/api-reference/overview","permalink":"/SintraPrime/docs/api-reference/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/ihoward40/SintraPrime/tree/gh-pages-source/docs/api-reference/overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"API Reference","description":"Complete API reference for SintraPrime\'s Airlock Server and Brain Service endpoints."},"sidebar":"apiSidebar"}');var l=n(4848),r=n(8453);const s={sidebar_position:1,title:"API Reference",description:"Complete API reference for SintraPrime's Airlock Server and Brain Service endpoints."},d="API Reference",c={},a=[{value:"Airlock Server API",id:"airlock-server-api",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Endpoints",id:"endpoints",level:3},{value:"POST /api/v1/task",id:"post-apiv1task",level:4},{value:"POST /api/v1/workflow",id:"post-apiv1workflow",level:4},{value:"GET /api/v1/status",id:"get-apiv1status",level:4},{value:"GET /api/v1/receipts",id:"get-apiv1receipts",level:4},{value:"GET /api/v1/receipts/",id:"get-apiv1receipts-1",level:4},{value:"POST /api/v1/receipts/verify",id:"post-apiv1receiptsverify",level:4},{value:"GET /api/v1/evidence",id:"get-apiv1evidence",level:4},{value:"GET /api/v1/evidence/",id:"get-apiv1evidence-1",level:4},{value:"POST /api/v1/webhook",id:"post-apiv1webhook",level:4},{value:"GET /health",id:"get-health",level:4},{value:"Brain Service API (Internal)",id:"brain-service-api-internal",level:2},{value:"Key Internal Endpoints",id:"key-internal-endpoints",level:3},{value:"Error Responses",id:"error-responses",level:2},{value:"Error Codes",id:"error-codes",level:3},{value:"SDKs and Client Libraries",id:"sdks-and-client-libraries",level:2},{value:"Next Steps",id:"next-steps",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.header,{children:(0,l.jsx)(t.h1,{id:"api-reference",children:"API Reference"})}),"\n",(0,l.jsxs)(t.p,{children:["SintraPrime exposes two primary API surfaces: the ",(0,l.jsx)(t.strong,{children:"Airlock Server"})," (external-facing gateway) and the ",(0,l.jsx)(t.strong,{children:"Brain Service"})," (internal orchestrator). All external interactions should go through the Airlock Server."]}),"\n",(0,l.jsx)(t.h2,{id:"airlock-server-api",children:"Airlock Server API"}),"\n",(0,l.jsxs)(t.p,{children:["Base URL: ",(0,l.jsx)(t.code,{children:"http://localhost:3100"})]}),"\n",(0,l.jsx)(t.h3,{id:"authentication",children:"Authentication"}),"\n",(0,l.jsx)(t.p,{children:"All Airlock requests require HMAC-SHA256 authentication:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-bash",children:'# Generate HMAC signature\nSIGNATURE=$(echo -n "${REQUEST_BODY}" | openssl dgst -sha256 -hmac "${AIRLOCK_HMAC_SECRET}" | awk \'{print $2}\')\n\n# Include in request header\ncurl -X POST http://localhost:3100/api/v1/task \\\n  -H "Content-Type: application/json" \\\n  -H "X-HMAC-Signature: ${SIGNATURE}" \\\n  -d "${REQUEST_BODY}"\n'})}),"\n",(0,l.jsx)(t.h3,{id:"endpoints",children:"Endpoints"}),"\n",(0,l.jsx)(t.h4,{id:"post-apiv1task",children:"POST /api/v1/task"}),"\n",(0,l.jsx)(t.p,{children:"Submit a task for agent execution."}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.strong,{children:"Request:"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "task": "Send weekly report via email",\n  "agent": "general-purpose-agent",\n  "mode": "SINGLE_RUN_APPROVED",\n  "params": {\n    "to": "team@example.com",\n    "subject": "Weekly Report"\n  }\n}\n'})}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.strong,{children:"Response:"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "task_id": "task_a1b2c3d4",\n  "status": "accepted",\n  "receipt_id": "rcpt_e5f6g7h8",\n  "estimated_duration": 30\n}\n'})}),"\n",(0,l.jsx)(t.h4,{id:"post-apiv1workflow",children:"POST /api/v1/workflow"}),"\n",(0,l.jsx)(t.p,{children:"Execute a workflow."}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.strong,{children:"Request:"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "workflow": "evidence-collection",\n  "params": {\n    "since": "7d"\n  }\n}\n'})}),"\n",(0,l.jsx)(t.h4,{id:"get-apiv1status",children:"GET /api/v1/status"}),"\n",(0,l.jsx)(t.p,{children:"Get system status."}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.strong,{children:"Response:"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "status": "healthy",\n  "version": "2.0.0",\n  "governance_mode": "SINGLE_RUN_APPROVED",\n  "active_tasks": 0,\n  "services": {\n    "brain": "up",\n    "fastapi": "up",\n    "mysql": "connected"\n  }\n}\n'})}),"\n",(0,l.jsx)(t.h4,{id:"get-apiv1receipts",children:"GET /api/v1/receipts"}),"\n",(0,l.jsx)(t.p,{children:"List recent receipts."}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.strong,{children:"Query Parameters:"})}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Default"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"limit"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"integer"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"20"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Number of receipts to return"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"offset"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"integer"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"0"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Pagination offset"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"type"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u2014"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Filter by receipt type"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"since"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u2014"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Filter by timestamp (ISO 8601)"})]})]})]}),"\n",(0,l.jsxs)(t.h4,{id:"get-apiv1receipts-1",children:["GET /api/v1/receipts/",":id"]}),"\n",(0,l.jsx)(t.p,{children:"Get a specific receipt."}),"\n",(0,l.jsx)(t.h4,{id:"post-apiv1receiptsverify",children:"POST /api/v1/receipts/verify"}),"\n",(0,l.jsx)(t.p,{children:"Verify a receipt or receipt chain."}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.strong,{children:"Request:"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "receipt_id": "rcpt_a1b2c3d4",\n  "verify_chain": true\n}\n'})}),"\n",(0,l.jsx)(t.h4,{id:"get-apiv1evidence",children:"GET /api/v1/evidence"}),"\n",(0,l.jsx)(t.p,{children:"List evidence items."}),"\n",(0,l.jsxs)(t.h4,{id:"get-apiv1evidence-1",children:["GET /api/v1/evidence/",":id"]}),"\n",(0,l.jsx)(t.p,{children:"Get a specific evidence item with metadata."}),"\n",(0,l.jsx)(t.h4,{id:"post-apiv1webhook",children:"POST /api/v1/webhook"}),"\n",(0,l.jsx)(t.p,{children:"Receive external webhook payloads (Make.com, Slack, etc.)."}),"\n",(0,l.jsx)(t.h4,{id:"get-health",children:"GET /health"}),"\n",(0,l.jsx)(t.p,{children:"Health check endpoint (no authentication required)."}),"\n",(0,l.jsx)(t.h2,{id:"brain-service-api-internal",children:"Brain Service API (Internal)"}),"\n",(0,l.jsxs)(t.p,{children:["Base URL: ",(0,l.jsx)(t.code,{children:"http://localhost:3000"})]}),"\n",(0,l.jsx)(t.admonition,{title:"Internal API",type:"warning",children:(0,l.jsx)(t.p,{children:"The Brain Service API is intended for internal service-to-service communication only. Do not expose it externally. Use the Airlock Server for all external interactions."})}),"\n",(0,l.jsx)(t.h3,{id:"key-internal-endpoints",children:"Key Internal Endpoints"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Endpoint"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"/agent/execute"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"POST"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Execute an agent task"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"/agent/plan"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"POST"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Generate an execution plan"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"/workflow/run"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"POST"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Run a workflow"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"/governance/mode"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"GET/PUT"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Get or set governance mode"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"/governance/gates"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"GET"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"List policy gates"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"/receipts/generate"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"POST"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Generate a receipt"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"/receipts/chain/verify"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"POST"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Verify receipt chain"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"/evidence/ingest"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"POST"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Ingest evidence"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"/evidence/timeline/build"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"POST"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Build a timeline"})]})]})]}),"\n",(0,l.jsx)(t.h2,{id:"error-responses",children:"Error Responses"}),"\n",(0,l.jsx)(t.p,{children:"All API errors follow a consistent format:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "error": {\n    "code": "GOVERNANCE_DENIED",\n    "message": "Operation denied: system is in READ_ONLY mode",\n    "receipt_id": "rcpt_denial_a1b2c3",\n    "details": {\n      "current_mode": "READ_ONLY",\n      "required_mode": "SINGLE_RUN_APPROVED"\n    }\n  }\n}\n'})}),"\n",(0,l.jsx)(t.h3,{id:"error-codes",children:"Error Codes"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Code"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"HTTP Status"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"INVALID_HMAC"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"401"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"HMAC signature verification failed"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"RATE_LIMITED"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"429"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Request rate limit exceeded"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"GOVERNANCE_DENIED"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"403"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Governance policy denied the operation"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"VALIDATION_FAILED"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"400"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Request validation failed"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"AGENT_NOT_FOUND"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"404"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Specified agent not found"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"TASK_TIMEOUT"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"408"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Task execution timed out"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"INTERNAL_ERROR"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"500"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Internal server error"})]})]})]}),"\n",(0,l.jsx)(t.h2,{id:"sdks-and-client-libraries",children:"SDKs and Client Libraries"}),"\n",(0,l.jsx)(t.p,{children:"SintraPrime provides a TypeScript client library:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-typescript",children:"import { SintraPrimeClient } from '@sintraprime/client';\n\nconst client = new SintraPrimeClient({\n  endpoint: 'http://localhost:3100',\n  hmacSecret: process.env.AIRLOCK_HMAC_SECRET,\n});\n\n// Submit a task\nconst result = await client.submitTask({\n  task: 'Check system status',\n  agent: 'general-purpose-agent',\n});\n\n// Verify a receipt\nconst verification = await client.verifyReceipt('rcpt_a1b2c3d4');\n"})}),"\n",(0,l.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.a,{href:"../core-concepts/architecture-overview",children:"Architecture Overview"})," \u2014 System design"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.a,{href:"../getting-started/quick-start-docker",children:"Quick Start (Docker)"})," \u2014 Get started"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.a,{href:"../getting-started/configuration",children:"Configuration Reference"})," \u2014 API configuration"]}),"\n"]})]})}function o(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},8453(e,t,n){n.d(t,{R:()=>s,x:()=>d});var i=n(6540);const l={},r=i.createContext(l);function s(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);